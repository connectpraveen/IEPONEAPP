FROM node:10.7.0 AS builder
MAINTAINER IEP|ONE
# add source code to images
COPY . /ieponeapp

# switch working directory
WORKDIR /ieponeapp

# install dependencies
RUN npm install
RUN npm rebuild node-sass
RUN $(npm bin)/ng build

FROM nginx

Copy --from=builder /ieponeapp/dist/* /usr/share/nginx/html/
# expose port 4200
EXPOSE 8080